<!DOCTYPE html>
<html lang="en">
  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-NZJ3B1EWK6"></script>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="grid-overlay"></div>
  <div class="floating-orb orb-1"></div>
  <div class="floating-orb orb-2"></div>
  <main>
    <header>
      <div class="logo">
        <img class="logo-mark" src="logo (1).png" alt="MidasAlters logo">
        <span>MidasAlters</span>
      </div>
      <nav>
        <a href="#gallery" data-preview="View the gilded gallery">Gallery</a>
        <a href="#process" data-preview="See how commissions flow">Process</a>
        <a href="#payment" data-preview="MidasAlters commissions request">Commissions</a>
        <a href="#contact" data-preview="Email and socials">Contact</a>
      </nav>
    </header>

    <section class="hero" aria-labelledby="hero-title">
      <div>
        <div class="pill">Premium Altered Magic</div>
        <h1 id="hero-title">MidasAlters <span>custom foil vinyl</span> for the cards you love.</h1>
        <p>Hand-crafted, gilded alterations that respect the frame while turning each spell into a showpiece. Museum-grade varnish, play-safe finishes, and a guaranteed wow at every table.</p>
        <div class="cta-row">
          <a class="btn btn-primary" href="#payment">Commission a piece</a>
          <a class="btn" href="#gallery">See the gallery</a>
          <span class="note">Lower than average price and turnaround - International shipping available</span>
        </div>
      </div>
      <div class="card-stack" aria-label="Customer reviews">
        <div class="card">
          <h3>CheeZ4 (Discord)</h3>
          <div class="type">Customer Statement</div>
          <div class="rules">“Looks amazing!! Thank you so much, I really appreciate it.”</div>
        </div>
        <div class="card">
          <h3>Aura (Discord)</h3>
          <div class="type">Customer Statement</div>
          <div class="rules">“Beautiful!”</div>
        </div>
        <div class="card">
          <h3>"Alex" (Reddit)</h3>
          <div class="type">Customer Statement</div>
          <div class="rules">"Excellent work and professional! I will definitely keep my eye on any future alters MidasAlters makes!”</div>
        </div>
      </div>
    </section>

    <section id="gallery" aria-labelledby="gallery-title">
      <!-- gallery styles moved to external stylesheet -->
      <h2 id="gallery-title">Alter Gallery</h2>
      <p class="note" style="color:#ffffff"><a href="https://drive.google.com/drive/u/1/folders/1iBj5DzNmjvZtSgd_dQyVBCw52jv_QvxB" style="color:inherit">View the entire portfolio</a></p>
      <div class="gallery">
      <article class="art-card">
        <div>
        <video class="lazy-video" width="640" preload="none" loop muted playsinline poster="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 640 360'><rect fill='%230d0b07' width='640' height='360'/><polygon fill='%23f5c451' points='260,180 420,250 420,110'/></svg>">
          <source data-src="lonis.mp4" type="video/mp4">
        </video>
        </div>
      </article>

      <article class="art-card">
        <div>
        <video class="lazy-video" width="640" preload="none" loop muted playsinline poster="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 640 360'><rect fill='%230d0b07' width='640' height='360'/><polygon fill='%23f5c451' points='260,180 420,250 420,110'/></svg>">
          <source data-src="Teysa.mp4" type="video/mp4">
        </video>
        </div>
      </article>

      <article class="art-card">
        <div>
        <video class="lazy-video" width="640" preload="none" loop muted playsinline poster="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 640 360'><rect fill='%230d0b07' width='640' height='360'/><polygon fill='%23f5c451' points='260,180 420,250 420,110'/></svg>">
          <source data-src="kinnan.mp4" type="video/mp4">
        </video>
        </div>
      </article>

      <article class="art-card">
        <div>
        <video class="lazy-video" width="640" preload="none" loop muted playsinline poster="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 640 360'><rect fill='%230d0b07' width='640' height='360'/><polygon fill='%23f5c451' points='260,180 420,250 420,110'/></svg>">
          <source data-src="hacker.mp4" type="video/mp4">
        </video>
        </div>
      </article>

      <article class="art-card">
        <div>
          <video class="lazy-video" width="640" preload="none" loop muted playsinline poster="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 640 360'><rect fill='%230d0b07' width='640' height='360'/><polygon fill='%23f5c451' points='260,180 420,250 420,110'/></svg>">
        <source data-src="Seer.mp4" type="video/mp4">
          </video>
        </div>
      </article>

      <article class="art-card">
        <div>
          <video class="lazy-video" width="640" preload="none" loop muted playsinline poster="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 640 360'><rect fill='%230d0b07' width='640' height='360'/><polygon fill='%23f5c451' points='260,180 420,250 420,110'/></svg>">
        <source data-src="Kinnan2.mp4" type="video/mp4">
          </video>
        </div>
      </article>
      </div>
    </section>

    <section id="process" aria-labelledby="process-title">
      <h2 id="process-title">Commission Flow</h2>
      <div class="process">
        <div class="step">
          <strong>1. Card & concept</strong>
          <p class="note">Tell me the card, mood, and any reference designs.</p>
        </div>
        <div class="step">
          <strong>2. Sketch approval</strong>
          <p class="note">Receive a digital mockup for layout and palette; many revisions included.</p>
        </div>
        <div class="step">
          <strong>3. Apply & finish</strong>
          <p class="note">MakeMarket vinyls that keep the card tournament friendly*.</p>
        </div>
        <div class="step">
          <strong>4. Ship & share</strong>
          <p class="note">Shipped quickly with a studio video for your anticipation of its arrival.</p>
        </div>
      </div>
    </section>

    <section id="payment" aria-labelledby="payment-title">
      <h2 id="payment-title">Book Your Alter</h2>
      <div class="stripe-block">
        <div>
          <p class="note">Secure payment via PayPal Goods and Services. Once you submit your booking, you will receive a confirmation email with next steps.</p>
          <div class="chips">
            <span class="badge">Please fill out the form and I'll get back to you shortly!</span>
            <span class="badge">International shipping available</span>
          </div>
        </div>
        <div class="stripe-card">
          <h3>Commission Request</h3>
          <p>Use the link below to sign up for your commission.</p>
          <a class="btn btn-primary" href="https://forms.gle/thPq5ntS2kmrcPFC8" target="_blank" rel="noreferrer noopener">Open Commission Form</a>
          <div style="height:12px" aria-hidden="true"></div>
          <a class="note" href="#contact">Have questions? Contact me below.</a>
        </div>
      </div>
    </section>

    <section id="contact" aria-labelledby="contact-title">
      <h2 id="contact-title">Get In Touch With The Designer</h2>
      <div class="process">
        <div class="step">
          <strong>Direct email</strong>
          <a href="mailto:midasalters@gmail.com"><p class="note">midasalters@gmail.com</p></a>
        </div>
        <div class="step">
          <strong>What to include</strong>
          <p class="note">Card name and printing, quantity, design direction and colors, budget, and destination country.</p>
        </div>
        <div class="step">
          <strong>Socials</strong>
            <p class="note"><a href="https://www.reddit.com/user/MidasAlters/" style="color:inherit; text-decoration:none;">@midasalters</a> on Reddit and Discord — WIP reels and foil alters posted frequently.</p>
        </div>
      </div>
    </section>

    <footer>
      Crafted for Magic: The Gathering enthusiasts. Not affiliated with Wizards of the Coast.
      <br>
      *Make sure to determine tournament legality with the head judge every time.
      <br>
      <p class="note">I am not responsible for damage to cards, lost or stolen items, or shipping damage or lost packages. Please insure shipments if you require protection. Not all of my packages are tracked, if you would like insurance, you can add that separately.</p>
      <span class="note">© 2026 MidasAlters. All rights reserved.</span>
    </footer>
  </main>
  <script>
    // Lazy-load gallery videos and play only when visible.
    document.addEventListener('DOMContentLoaded', function () {
      const videos = Array.from(document.querySelectorAll('.lazy-video'));
      if (!videos.length) return;

      // ensure videos are muted and play inline early so browsers allow quick autoplay
      videos.forEach(v => {
        try { v.muted = true; } catch(e) {}
        try { v.playsInline = true; } catch(e) {}
      });

      // Try to set a real thumbnail image for each video if a file exists.
      const trySetPoster = async (video) => {
        try {
          const srcEl = video.querySelector('source[data-src]');
          if (!srcEl) return;
          const src = srcEl.dataset.src;
          const base = src.replace(/\.[^.]+$/, '');
          const candidates = [
            base + '-thumbnail.jpg', base + '-thumbnail.png',
            base + '.jpg', base + '.png', base + '-thumb.jpg', base + '-thumb.png'
          ];
          for (const c of candidates) {
            try {
              const res = await fetch(c, { method: 'HEAD' });
              if (res.ok) {
                video.setAttribute('poster', c);
                if (video._posterImg) video._posterImg.src = c;
                return;
              }
            } catch (e) {
              // ignore fetch errors (CORS/local file), try next candidate
            }
          }
        } catch (e) {
          // ignore
        }
      };

      const loadAndPlay = (video) => {
        if (!video.dataset.loaded) {
          // ask browser to fetch only metadata first to reduce startup delay
          try { video.preload = 'metadata'; } catch(e) {}
          const sources = video.querySelectorAll('source[data-src]');
          sources.forEach(s => { s.src = s.dataset.src; });
          video.load();
          video.dataset.loaded = 'true';
        }
        // ensure muted (some browsers block autoplay with sound)
        try { video.muted = true; } catch(e) {}
        // attempt to play immediately; some delay may occur while data buffers
        const p = video.play();
        if (p && p.catch) p.catch(err => {
          // silently log so we can debug without breaking page
          console.warn('Video play prevented:', err);
        });
      };

      // Ensure metadata (headers/duration/first frame) is loaded without autoplaying
      const ensureLoaded = (video) => {
        if (video.dataset.metaLoaded) return;
        try { video.preload = 'metadata'; } catch(e) {}
        const sources = video.querySelectorAll('source[data-src]');
        sources.forEach(s => { if (!s.src) s.src = s.dataset.src; });
        try { video.load(); } catch(e) {}
        video.dataset.metaLoaded = 'true';
      };

      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          const v = entry.target;
          if (entry.isIntersecting) {
            // prefetch metadata only; do not autoplay here
            ensureLoaded(v);
          } else {
            try { v.pause(); } catch(e) {}
          }
        });
      }, { root: null, rootMargin: '200px', threshold: 0.25 });

      videos.forEach(v => {
        // wrap the video in a container and add a custom poster image element
        const wrapper = document.createElement('div');
        wrapper.className = 'video-wrap';
        // insert wrapper before video then move video inside
        v.parentNode.insertBefore(wrapper, v);
        wrapper.appendChild(v);
        const posterImg = document.createElement('img');
        posterImg.className = 'video-poster';
        // use any existing poster (SVG placeholder) immediately
        const initialPoster = v.getAttribute('poster') || '';
        if (initialPoster) posterImg.src = initialPoster;
        wrapper.appendChild(posterImg);
        // keep a reference for trySetPoster to update later
        v._posterImg = posterImg;
        // remove native poster attribute to avoid native overlays
        v.removeAttribute('poster');

        // attempt to find a real poster image (will update posterImg when found)
        trySetPoster(v);
        observer.observe(v);

        v.addEventListener('play', () => {
          if (v._posterImg) v._posterImg.style.display = 'none';
          videos.forEach(other => { if (other !== v && !other.paused) other.pause(); });
        });
        v.addEventListener('pause', () => { if (v._posterImg) v._posterImg.style.display = ''; });

        // click-to-play fallback on wrapper
        wrapper.addEventListener('click', () => {
          if (!v.dataset.loaded) loadAndPlay(v);
          if (v.paused) v.play().catch(()=>{}); else v.pause();
        });

        // Make wrapper keyboard-focusable and add hover/focus handlers for play-on-hover
        try { wrapper.setAttribute('tabindex', '0'); } catch (e) {}
        if (window.matchMedia && window.matchMedia('(hover: hover) and (pointer: fine)').matches) {
          wrapper.addEventListener('mouseenter', () => {
            if (!v.dataset.loaded) loadAndPlay(v); else v.play().catch(()=>{});
          });
          wrapper.addEventListener('mouseleave', () => { try { v.pause(); } catch(e) {} });
        }
        wrapper.addEventListener('focus', () => { if (!v.dataset.loaded) loadAndPlay(v); else v.play().catch(()=>{}); });
        wrapper.addEventListener('blur', () => { try { v.pause(); } catch(e) {} });
      });
    });
  </script>
  <script>
    // Smooth-scroll fallback that accounts for the sticky header.
    (function () {
      function getHeaderOffset() {
        const header = document.querySelector('header');
        if (!header) return 0;
        // Use bounding rect height (works with sticky and responsive layouts)
        return Math.ceil(header.getBoundingClientRect().height) + 8;
      }

      function smoothScrollToElement(el) {
        if (!el) return;
        const offset = getHeaderOffset();
        const top = el.getBoundingClientRect().top + window.pageYOffset - offset;
        window.scrollTo({ top: top, behavior: 'smooth' });
      }

      // Intercept all same-page anchor links and perform a smooth scroll
      document.addEventListener('click', function (e) {
        const a = e.target.closest && e.target.closest('a[href^="#"]');
        if (!a) return;
        const href = a.getAttribute('href');
        if (!href || href === '#') return;
        // only handle same-document anchors
        if (href.indexOf('#') === 0) {
          const target = document.querySelector(href);
          if (target) {
            e.preventDefault();
            // update URL without jumping
            if (history.pushState) {
              history.pushState(null, '', href);
            } else {
              location.hash = href;
            }
            smoothScrollToElement(target);
          }
        }
      }, { passive: true });

      // If page loaded with a hash, ensure we scroll to it below the header
      window.addEventListener('load', function () {
        if (location.hash) {
          const target = document.querySelector(location.hash);
          if (target) {
            // delay slightly to let layout and sticky header settle
            setTimeout(function () { smoothScrollToElement(target); }, 50);
          }
        }
      });
    }());
  </script>
</body>
</html>
